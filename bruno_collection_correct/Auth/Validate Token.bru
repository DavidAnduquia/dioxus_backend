meta {
  name: Validate Token
  type: http
  seq: 3
}

post {
  url: {{BASE_URL}}/auth/validate-token
  body: json
  auth: none
}

headers {
  Content-Type: application/json
}

body:json {
  {
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIyI‚Ä¶2MTF9.x3m-cwh_X1D0Eb6MY_XJzmXvKX_21ryrSmB702xq1Js"
  }
}

script:post-response {
  try {
    // Procesar respuesta de validaci√≥n de token
    if (res.status === 200) {
      const responseData = res.body;
      if (responseData && responseData.success && responseData.data) {
        const tokenData = responseData.data;
        console.log("‚úÖ Token v√°lido");
        console.log("üë§ Usuario ID:", tokenData.user_id);
        console.log("üìß Email:", tokenData.email);
        console.log("‚è∞ Expira en:", tokenData.time_until_expiry, "segundos");
        console.log("üìÖ Emitido:", new Date(tokenData.issued_at * 1000).toLocaleString());
        console.log("‚åõ Expira:", new Date(tokenData.expires_at * 1000).toLocaleString());
      } else {
        console.log("‚ùå Respuesta del servidor inv√°lida:", responseData);
      }
    } else {
      console.log("‚ùå Token inv√°lido o expirado - Status:", res.status);
      console.log("Response:", res.body);
    }
  } catch (error) {
    console.log("‚ùå Error procesando respuesta:", error.message);
    console.log("Raw response:", res.body);
  }
}
